<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Impact Subsea SDK: Impact Subsea SDK</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Impact Subsea SDK<span id="projectnumber">&#160;V3.1.6</span>
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Impact Subsea SDK </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_mainpage"></a></p><div style="color:red;" align="center"> Read this page first to understand the basics of the SDK!</div><h1><a class="anchor" id="autotoc_md1"></a>
Introduction</h1>
<p>The Software Development Kit (SDK) is an open source software library that simplifies the development of an application intended to communicate with Impact Subsea products. The SDK provides the following:<br  />
</p><ul>
<li>Ability to open, close and configure the computer’s serial and network ports.</li>
<li>Interact with Serial over LAN (SOL) or (network to serial adapters).</li>
<li>Automatically discover Impact Subsea devices connected to the computer.</li>
<li>Automatically detect NMEA devices, such as a GPS connected to the computer serial ports.</li>
<li>Dynamically creates objects to manage each discovered device and allow the user’s application to interact with the device via this object.</li>
<li>Log all connected Impact Subsea devices and GPS data to a log file.</li>
<li>Play back of log files.</li>
</ul>
<p>The SDK is written in C++17 and cmake is used for compiling the project. It has been written in a cross-platform way with embedded credit card computers in mind, such as the Raspberry Pi and Beagle Bone type systems. The minimum hardware specification is:<br  />
</p><ul>
<li>100Mhz 32-bit processor with FPU (Floating Point Unit)</li>
<li>32MB RAM</li>
</ul>
<div style="color:red;" align="center"> This SDK will detect all firmware versions of Impact Subsea devices but will only work with firmware versions 3.x.x and above.</div><hr  />
<h1><a class="anchor" id="autotoc_md2"></a>
Architecture</h1>
<p>The SDK is based on the Observer pattern. Data is generally acquired by subscribing to the provided signals, allowing for event based programming. All calls into the SDK are non-blocking.</p>
<p>The <code><a class="el" href="">Signals</a></code> connect to <code><a class="el" href="class_isl_sdk_1_1_slot.html">Slot</a></code> classes which hold the function pointer of the user’s function. The use of a slot class means if the users object is destructed then the slot class is also destructed and will unsubscribe from the event. This avoids dangling member function pointers. For efficiency the Signal Slot system is not thread safe.</p>
<p>To use the SDK first make an instance of <code><a class="el" href="class_isl_sdk_1_1_sdk.html">Sdk</a></code>. Then subscribe to the <code><a class="el" href="class_isl_sdk_1_1_sys_port_mgr.html#abd004407404f5746de326a0f7fdbf1eb">sdk.ports.onNew</a></code>, <code><a class="el" href="class_isl_sdk_1_1_device_mgr.html#ab451793e43a2ea1ddc33c69ae3bfc814">sdk.device.onNew</a></code> and optionally <code><a class="el" href="#ad338441cf144e29f1c7a15bf13f8d964">sdk.nmeaDevices.onNew</a></code> signals using the <code><a class="el" href="class_isl_sdk_1_1_signal.html#a3f8de348785bcc5b2f3116e1e594581b">connect</a></code> function.</p>
<p>Now call <code><a class="el" href="class_isl_sdk_1_1_sdk.html#a76ea795aa3edab83c64fc3007e311e86">sdk.run()</a></code> repeatedly from a timer or a loop at a sufficient rate, every 40 milliseconds is sufficient. This runs all the sdk tasks such as checking for new ports and processing the devices protocol stack. All signals are fired from this call so make sure it’s called from the thread you want the subscribed function to run in. See the example app for a working example of SDK usage.</p>
<div class="image">
<img src="SDKarch.png" alt=""/>
<div class="caption">
SDK Architecture</div></div>
    <h2><a class="anchor" id="autotoc_md3"></a>
Device Manager</h2>
<p>The <code><a class="el" href="class_isl_sdk_1_1_device_mgr.html">Device Manager</a></code> class maintains a list of devices by holding a shared pointer to the base class <code><a class="el" href="class_isl_sdk_1_1_device.html">Device</a></code>. All Impact Subsea products inherit from this class. It provides the basic functionality and communication services.</p>
<h3><a class="anchor" id="autotoc_md4"></a>
Device comms</h3>
<p>Since firmware version 3.x.x devices now use a more complicated <a href="https://en.wikipedia.org/wiki/High-Level_Data_Link_Control">HDLC</a> style of communication. Normal response mode (NRM) for half duplex systems like RS485, single and multidrop, and Asynchronous response mode (ARM) for full duplex links like RS232 and ethernet are supported. The protocol guarantees delivery of data by the detection and retransmission of packets. Pre firmware 3.x.x versions devices used a simple stop and wait type protocol which limited the bandwidth as devices were polled by the host. This new HDLC style of communication is a best effort service, once both host and device have negotiated a connection any side is free to send data when in ARM mode.</p>
<p>When devices communicate over a network connection the HDLC frames are placed into the UDP payload as UDP offers a packet delivery service unlike a TCP stream. When devices communicate over RS232 or RS485 the HDLC packets are <a href="https://en.wikipedia.org/wiki/Consistent_Overhead_Byte_Stuffing">COBS</a> encoded to provide frame delimitation.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Port Manager</h2>
<p>The <code><a class="el" href="class_isl_sdk_1_1_sys_port_mgr.html">Port Manager</a></code> class maintains a list of ports by holding a shared pointer to the base class <code><a class="el" href="class_isl_sdk_1_1_sys_port.html">SysPort</a></code>. This generalised base class offers a common interface for device to communicate through. It is inherited by every type of host communication port the SDK supports. E.g. <code><a class="el" href="class_isl_sdk_1_1_uart_port.html">UartPort</a></code> for the serial ports, <code><a class="el" href="class_isl_sdk_1_1_net_port.html">NetPort</a></code> for network sockets and <code><a class="el" href="class_isl_sdk_1_1_sol_port.html">SolPort</a></code> for Serial Over LAN adapters.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md6"></a>
How to build</h1>
<p>The SDK and example app requires two #define's to be defined these are:<br  />
 #define <code>SYSTEM_32BIT</code> or <code>SYSTEM_64BIT</code> depending if 32 or 64 bit builds are required.<br  />
 #define <code>OS_WINDOWS</code> or <code>OS_UNIX</code> depending on the platform.<br  />
</p>
<p>#define <code>DEBUG_ON</code> can also be define if the SDK is to output debug messages.</p>
<p>The <code>CMakeLists.txt</code> automatically defines these definitions depending on the platform and release / debug builds. However, the <code>SYSTEM_32BIT</code> or <code>SYSTEM_64BIT</code> definitions have to be manually selected by modifying the <code>CMakeLists.txt</code> file. Add <code>set(X32_BIT TRUE)</code> for 32 bit builds.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
Using Microsoft Visual Studios</h2>
<ol type="1">
<li>Open Microsoft Visual Studios and click continue without code.</li>
<li>Open the <code>CmakeLists.txt</code> file from the menu <code>File-&gt;Open-&gt;CMake..</code></li>
<li>Select the startup object from the dropdown green compile and run button.</li>
<li>Click the Compile / Run button.</li>
</ol>
<h2><a class="anchor" id="autotoc_md8"></a>
Building just the SDK into a static library using cmake</h2>
<ol type="1">
<li>Navigate to the islSdk folder and create a new folder named build in which to place the build files. Note the folder name is not important.</li>
<li>Open a terminal and navigate to the newly created build folder.</li>
<li>At the terminal command line type: <code>cmake -DCMAKE_BUILD_TYPE=Debug ..</code> Note the space and 2 dots at the end as the CMakeLists.txt file is up a directory. <code>cmake -DCMAKE_BUILD_TYPE=Release ..</code> is another option and will turn off the SDK generated debug messages.</li>
<li>At the terminal command line type: <code>make</code>. If using windows type <code>cmake --build .</code></li>
</ol>
<p>The SDK source code will compile to a static library placed in the build/lib folder.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Building the Example App and SDK to produce an executable using cmake</h2>
<ol type="1">
<li>Navigate to the folder containing the sdkExample folder, islSdk folder and CMakeLists.txt file. Create a new folder named build in which to place the build files. Note the folder name is not important.</li>
<li>Open a terminal and navigate to the newly created build folder.</li>
<li>At the terminal command line type: <code>cmake -DCMAKE_BUILD_TYPE=Debug ..</code> Note the space and 2 dots at the end as the CMakeLists.txt file is up a directory. <code>cmake -DCMAKE_BUILD_TYPE=Release ..</code> is another option and will turn off the SDK generated debug messages.</li>
<li>At the terminal command line type: <code>make</code>. If using windows type <code>cmake --build .</code></li>
<li>Run the executable by typing <code>bin/sdkExample</code> into the terminal. </li>
</ol>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
